{
  "schema_version": 1.0,
  "tables": {
    "sales_order": {
      "description": "Orders placed by customers. `increment_id` is usually referred to as the order number externally.",
      "fields": ["entity_id", "increment_id", "grand_total", "created_at"],
      "customInfo": "entity_id links to customer_entity.entity_id via customer_id; entity_id joins sales_order_payment.parent_id",
      "joins": [
        {"to_table": "customer_entity", "from_field": "customer_id", "to_field": "entity_id"},
        {"to_table": "sales_order_payment", "from_field": "entity_id", "to_field": "parent_id"}
      ]
    },
    "sales_order_payment": {
      "description": "Payment records for each order.",
      "fields": ["parent_id", "amount_paid", "method"],
      "customInfo": "parent_id relates to sales_order.entity_id",
      "joins": [
        {"to_table": "sales_order", "from_field": "parent_id", "to_field": "entity_id"}
      ]
    },
    "customer_entity": {
      "description": "Customer profile information.",
      "fields": ["entity_id", "firstname", "lastname", "email"],
      "customInfo": "entity_id joins customer_loyalty_card.customer_id",
      "joins": [
        {"to_table": "customer_loyalty_card", "from_field": "entity_id", "to_field": "customer_id"}
      ]
    },
    "customer_loyalty_card": {
      "description": "Loyalty program cards linked to customers. The table only contains `card_id`, `card_number` and `customer_id` fields and has **no** wallet information.",
      "fields": ["card_id", "card_number", "customer_id"],
      "customInfo": "card_id joins customer_loyalty_ledger.card_id; customer_id links to customer_entity.entity_id",
      "joins": [
        {"to_table": "customer_entity", "from_field": "customer_id", "to_field": "entity_id"}
      ]
    },
    "customer_loyalty_ledger": {
      "description": "Loyalty point transactions for each wallet or card. It records points in `points_delta` with an optional `reason` and timestamp but does not store any order or payment amounts.",
      "fields": ["entry_id", "card_id", "points_delta", "reason", "created_at", "wallet_id"],
      "customInfo": "card_id links customer_loyalty_card.card_id; wallet_id joins customer_wallet.entity_id",
      "joins": [
        {"to_table": "customer_wallet", "from_field": "wallet_id", "to_field": "entity_id"},
        {"to_table": "customer_loyalty_card", "from_field": "card_id", "to_field": "card_id"}
      ]
    },
    "customer_wallet": {
      "description": "Wallets linked to customer accounts.",
      "fields": ["entity_id", "customer_id"],
      "customInfo": "customer_id joins customer_entity.entity_id",
      "joins": [
        {"to_table": "customer_entity", "from_field": "customer_id", "to_field": "entity_id"}
      ]
    }
  }
}
